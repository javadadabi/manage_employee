--
-- Create model Employee
--
CREATE TABLE `employee_manager_employee` (`employee_number` integer UNSIGNED NOT NULL PRIMARY KEY CHECK (`employee_number` >= 0), `first_name` varchar(50) NOT NULL, `last_name` varchar(100) NOT NULL, `slug` varchar(152) NOT NULL, `gender` varchar(1) NOT NULL, `hire_date` date NOT NULL, `salary` numeric(12, 2) NOT NULL, `remark` longtext NOT NULL);
--
-- Create model Responsibility
--
CREATE TABLE `employee_manager_responsibility` (`responsibility_name` varchar(150) NOT NULL PRIMARY KEY, `slug` varchar(150) NOT NULL UNIQUE, `rank` smallint UNSIGNED NOT NULL UNIQUE CHECK (`rank` >= 0), `description` longtext NOT NULL, `minimum_salary` numeric(12, 2) NOT NULL, `maximum_salary` numeric(12, 2) NOT NULL);
--
-- Create model Work
--
CREATE TABLE `employee_manager_work` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `work_title` varchar(200) NOT NULL, `slug` varchar(200) NOT NULL, `description` longtext NOT NULL, `begin` datetime(6) NOT NULL, `expected_duration` bigint NOT NULL, `end` datetime(6) NOT NULL, `created` datetime(6) NOT NULL, `updated` datetime(6) NOT NULL, `done` bool NOT NULL);
--
-- Create model Task
--
CREATE TABLE `employee_manager_task` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `task_name` varchar(200) NOT NULL, `slug` varchar(200) NOT NULL, `description` longtext NOT NULL, `start_time` datetime(6) NOT NULL, `expected_duration` bigint NOT NULL, `end_time` datetime(6) NOT NULL, `created` datetime(6) NOT NULL, `updated` datetime(6) NOT NULL, `done` bool NOT NULL, `belong_to_work_id` bigint NOT NULL, `employee_id` integer UNSIGNED NOT NULL);
--
-- Add field responsibilities to employee
--
CREATE TABLE `employee_manager_employee_responsibilities` (`id` bigint AUTO_INCREMENT NOT NULL PRIMARY KEY, `employee_id` integer UNSIGNED NOT NULL, `responsibility_id` varchar(150) NOT NULL);
--
-- Add field user to employee
--
ALTER TABLE `employee_manager_employee` ADD COLUMN `user_id` integer NOT NULL UNIQUE , ADD CONSTRAINT `employee_manager_employee_user_id_8c766728_fk_auth_user_id` FOREIGN KEY (`user_id`) REFERENCES `auth_user`(`id`);
--
-- Create index employee_ma_task_na_4bf64a_idx on field(s) task_name of model task
--
CREATE INDEX `employee_ma_task_na_4bf64a_idx` ON `employee_manager_task` (`task_name`);
--
-- Create index employee_ma_last_na_86746d_idx on field(s) last_name, first_name of model employee
--
CREATE INDEX `employee_ma_last_na_86746d_idx` ON `employee_manager_employee` (`last_name`, `first_name`);
CREATE INDEX `employee_manager_employee_slug_93ff0efa` ON `employee_manager_employee` (`slug`);
CREATE INDEX `employee_manager_work_slug_15d52161` ON `employee_manager_work` (`slug`);
ALTER TABLE `employee_manager_task` ADD CONSTRAINT `employee_manager_tas_belong_to_work_id_45f804a5_fk_employee_` FOREIGN KEY (`belong_to_work_id`) REFERENCES `employee_manager_work` (`id`);
ALTER TABLE `employee_manager_task` ADD CONSTRAINT `employee_manager_tas_employee_id_50fcab1e_fk_employee_` FOREIGN KEY (`employee_id`) REFERENCES `employee_manager_employee` (`employee_number`);
CREATE INDEX `employee_manager_task_slug_e946dd5f` ON `employee_manager_task` (`slug`);
ALTER TABLE `employee_manager_employee_responsibilities` ADD CONSTRAINT `employee_manager_employe_employee_id_responsibili_5bca72bc_uniq` UNIQUE (`employee_id`, `responsibility_id`);
ALTER TABLE `employee_manager_employee_responsibilities` ADD CONSTRAINT `employee_manager_emp_employee_id_3c4304e4_fk_employee_` FOREIGN KEY (`employee_id`) REFERENCES `employee_manager_employee` (`employee_number`);
ALTER TABLE `employee_manager_employee_responsibilities` ADD CONSTRAINT `employee_manager_emp_responsibility_id_e458a546_fk_employee_` FOREIGN KEY (`responsibility_id`) REFERENCES `employee_manager_responsibility` (`responsibility_name`);
